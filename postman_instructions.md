# Инструкция по использованию коллекции Postman для FurniSwap API

## Подготовка

1. Скачайте и установите [Postman](https://www.postman.com/downloads/)
2. Импортируйте файл `FurniSwap.postman_collection.json` в Postman:
   - Откройте Postman
   - Нажмите "Import" (вверху слева)
   - Перетащите файл коллекции или найдите его через диалог выбора файлов
   - Нажмите "Import"

3. Создайте переменную окружения:
   - Нажмите на иконку шестеренки (вверху справа)
   - Выберите "Add" для создания нового окружения
   - Назовите его, например, "FurniSwap Local"
   - Добавьте переменную `base_url` со значением `http://localhost:8080`
   - Добавьте переменную `token` с пустым значением (она будет заполнена автоматически после авторизации)
   - Сохраните окружение
   - Выберите созданное окружение в выпадающем списке справа вверху

## Тестирование API

Коллекция организована в логические группы в соответствии с функциональностью API:

### 1. Аутентификация

Для работы с защищенными эндпоинтами сначала нужно получить токен:

1. Выполните запрос "Регистрация пользователя" с вашими данными
2. Введите код подтверждения в запрос "Подтверждение регистрации" (код будет отправлен на указанный email)
3. Выполните запрос "Вход пользователя" (токен сохранится автоматически)
4. Если настроена двухфакторная аутентификация, выполните "Подтверждение двухфакторной аутентификации"

После успешной авторизации токен будет автоматически сохранен в переменной окружения `token` и будет использоваться для всех последующих запросов, требующих авторизации.

### 2. Профиль пользователя

- "Получение профиля" - просмотр своего профиля
- "Обновление профиля" - изменение имени, города и т.д.
- "Загрузка аватара" - загрузка изображения для аватара (замените путь к файлу на реальный)

### 3. Категории

- "Список категорий" - получение всех доступных категорий мебели

### 4. Объявления (публичные)

Для работы с этими эндпоинтами авторизация не требуется:

- "Список объявлений" - получение списка объявлений с возможностью фильтрации и сортировки
- "Просмотр объявления" - детальная информация по конкретному объявлению

### 5. Объявления (приватные)

Требуют авторизации:

- "Создание объявления" - создание нового объявления
- "Обновление объявления" - изменение существующего объявления
- "Удаление объявления" - удаление объявления
- "Загрузка изображения" - добавление фото к объявлению (замените путь к файлу на реальный)
- "Удаление изображения" - удаление фото
- "Установка главного изображения" - установка фото в качестве основного

### 6. Избранное

- "Добавление в избранное" - сохранение объявления в избранное
- "Удаление из избранного" - удаление из избранного
- "Проверка наличия в избранном" - проверка, добавлено ли объявление в избранное
- "Список избранных объявлений" - получение всех избранных объявлений

### 7. Чаты и сообщения

- "Создание чата" - начало общения с продавцом по конкретному объявлению
- "Список чатов" - получение всех активных чатов
- "Получение сообщений чата" - просмотр истории сообщений в конкретном чате
- "Отправка сообщения" - отправка сообщения в существующий чат

## Полезные советы

1. **ID объявлений, чатов и изображений** в URL-адресах запросов нужно заменять на реальные значения, полученные из предыдущих запросов.

2. **Автоматическое сохранение токена** - в запросах "Вход пользователя" и "Подтверждение двухфакторной аутентификации" установлены скрипты, которые автоматически сохраняют полученный токен в переменную окружения.

3. **Файлы для загрузки** - в запросах на загрузку файлов (аватар, изображения объявлений) необходимо выбрать реальные файлы с вашего компьютера.

4. **Тестирование фильтрации** - в запросе "Список объявлений" можно изменять параметры запроса для тестирования различных комбинаций фильтров и сортировки.

5. **Постепенный процесс** - следуйте логическому порядку запросов: сначала авторизация → создание объявления → загрузка изображений → чаты и т.д. 